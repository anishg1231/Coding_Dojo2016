<!DOCTYPE html>
<html ng-app = 'myApp'>
  <head>
    <meta charset="utf-8">
    <title>Controlling Users</title>
  </head>
  <script src="bower_components/angular/angular.js" charset="utf-8"></script>

  <script type="text/javascript">
    console.log(angular);

    var app = angular.module('myApp',[]);
    app.controller('usersController', function ($scope) {
      $scope.users = []
      $scope.addUser = function () {
        console.log('click me');
        console.log($scope.newUser);
        $scope.users.push($scope.newUser)
        $scope.newUser = {}
        }

        $scope.deleteUser = function (idx){
          console.log("delete" + idx);
          $scope.users.splice(idx, 1)
        }
      });


  </script>

  <body ng-controller = 'usersController'>
    <h1>Users with controllers</h1>
    <form>
      First Name:<input type="text" ng-model = 'newUser.first_name'><br>
      Last Name:<input type="text" ng-model = 'newUser.last_name'><br>
      Favorite Language:<input type="text" ng-model = 'newUser.language'><br>
      <input type="submit" value="Add User" ng-click = 'addUser()'>
    </form>
    <table>
      <thead>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Language</th>
        <th>Action</th>
      </thead>
      <tbody>
        <tr ng-repeat = 'user in users'>
          <td>{{user.first_name}}</td>
          <td>{{user.last_name}}</td>
          <td>{{user.language}}</td>
          <td><a href="" ng-click = 'deleteUser($index)'>Delete</a></td>
        </tr>

      </tbody>
    </table>


    <!-- <ul>
      <li ng-repeat = 'user in users'>{{user}}</li>

    </ul> -->
  </body>
</html>
